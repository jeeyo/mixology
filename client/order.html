<!DOCTYPE html>
<html>
  <head>
    <title>Mixology</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
      html, body {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
    </style>
  </head>

  <body>
    <nav class="navbar navbar-light bg-light">
      <span class="navbar-brand"><h1>Order</h1></span>
      
      <button class="btn" type="button" id="mix-conn-status-btn">
        <span class="fa fa-redo"></span>
      </button>
    </nav>

    <button class="btn" value="0">Jazzcuzzi</button>
    <button class="btn" value="1">Frisky</button>
    <button class="btn" value="2">Latinos</button>
    <button class="btn" value="3">Eelektross</button>
    <button class="btn" value="4">Rockumantary</button>
    <button class="btn" value="5">A K A Hip</button>

    <script src="js/jquery-3.0.0.slim.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/socket.io.js"></script>
    <script>
      var socket = io('http://localhost:3000/order', {
        reconnection: true,
        reconnectionDelay: 500,
        reconnectionAttempts: 10,
      });

      socket.on('connect', function() {
        console.log('WS Connected');
        $('#mix-conn-status-btn').removeClass('btn-success btn-danger');
        $('#mix-conn-status-btn').addClass('btn-success');
      });
      socket.on('disconnect', function() {
        console.log('WS Disconnected');
        $('#mix-conn-status-btn').removeClass('btn-success btn-danger');
        $('#mix-conn-status-btn').addClass('btn-danger');
      });

      $('#mix-conn-status-btn').on('click', function() {
        location.reload();
      });

      document.querySelectorAll('button').forEach((el) => {
        el.addEventListener('click', (evt) => {
          socket.emit('new', { mixture: evt.target.value });
        });
      });
    </script>
  </body>
</html>